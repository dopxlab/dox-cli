configure: |
  dox configure docker
  echo "$OCI_REG_PASSWORD" | docker login -u "$OCI_REG_USER" --password-stdin docker.io

  dox export GIT_REPOSITORY_NAME
  dox export BUILD_VERSION

template_folder: "${DOX_CUSTOM_DIR}/action/templates/docker" # ${template_folder} will be resolved path of the template folder 

variables:
  FROM_IMAGE: "eclipse-temurin:17-jre-alpine"
  IMAGE: ${DOCKER_IMAGE_PUSH_PREFIX}/${GIT_REPOSITORY_NAME}:${BUILD_VERSION}

actions:
  build_push: |
    cp ${template_folder}/Dockerfile ./
    echo "Docker Image: $IMAGE"
    docker buildx build --platform linux/amd64,linux/arm64 -t ${IMAGE} --push .