configure: |
  dox configure docker
  echo "$OCI_REG_PASSWORD" | docker login -u "$OCI_REG_USER" --password-stdin docker.io

  dox export GIT_REPOSITORY_NAME
  dox export BUILD_VERSION
  dox export DOCKER_IMAGE

template:
  folder: "${DOX_CUSTOM_DIR}/action/templates/docker" # ${template_folder} will be resolved path of the template folder 
  variables:
    IMAGE: "${DOCKER_IMAGE:-jre}"

actions:
  build_push: |
    cp ${template_folder}/Dockerfile ./
    cat Dockerfile
    echo "Docker Image: $DOCKER_IMAGE"
    docker build -t ${DOCKER_IMAGE} .
    docker push ${DOCKER_IMAGE}