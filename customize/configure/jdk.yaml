# Installation and Configuration
installation:
  download:
    template: |
      curl -s 'https://api.azul.com/metadata/v1/zulu/packages/?java_version={version}&os={os}&arch={arch}&java_package_type=jdk&availability_types=ca&latest=true' | jq -r '.[] | select(.download_url | endswith(".tar.gz")) | .download_url' | head -n 1
    
    mappings:
      os:
        mac: "macos"
        linux: "linux"
      arch:
        x86_64: "x86"
        aarch64: "arm"

  post_installation_script: |
    #!/bin/bash
    echo "install custom certificates"
    echo "JDK installed in ${install_dir}"

configuration:
  # Default JDK versioning using an environment variable or fallback to latest e.g. 25
  default_version: "${JDK_VERSION:-$(curl -s 'https://api.azul.com/metadata/v1/zulu/packages/?java_package_type=jdk&availability_types=ca&latest=true' | jq -r '.[0].java_version[0]')}"

  # Environment variable mappings for installation paths
  environments:
    JAVA_HOME: "${install_dir}"
    PATH: "${install_dir}/bin"

  # Print the installed version of the package
  post_configuration_script: |
    info "âœ“ JAVA_HOME: ${install_dir}"
    info "âœ“ Java version: $(java -version 2>&1 | head -n 1)"