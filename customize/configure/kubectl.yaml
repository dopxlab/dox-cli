installation:
  download:
    template: "https://dl.k8s.io/release/{version}/bin/{os}/{arch}/kubectl"
    mappings:
      os:
        mac: "darwin"
        linux: "linux"
      arch:
        x86_64: "amd64"
        aarch64: "arm64"

configuration:
  default_version: "${KUBECTL_VERSION:-$(curl -s https://api.github.com/repos/kubernetes/kubernetes/releases/latest | jq -r '.tag_name')}"

  environments:
    PATH: "${install_dir}"

  post_configuration_script: |
    #!/bin/bash
    echo "Configuring kubectl: $install_dir"

    if [ -d "$install_dir" ] && compgen -G "$install_dir/*" > /dev/null; then
      mv "$install_dir/"* "$install_dir/kubectl"
      chmod +x "$install_dir/kubectl"
    fi
    create_symlinks_to_bin $install_dir
    info "Kubernetes $(kubectl version --client)"    
    