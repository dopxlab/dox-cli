installation:
  dependencies:
    - jdk-gvm
  download:
    template: "https://dlcdn.apache.org/maven/maven-3/{version}/binaries/apache-maven-{version}-bin.tar.gz"
    mappings:
      os:
        linux: "linux"
        mac: "macos"
      arch:
        x86_64: "x64"
        amd64: "x64"
        arm64: "aarch64"
        aarch64: "aarch64"

configuration:
  default_version: "${MAVEN_VERSION:-$(curl -s https://api.github.com/repos/apache/maven/releases/latest | jq -r '.name')}"

  environments:
    M2_HOME: "${install_dir}"
    MAVEN_HOME: "${install_dir}"
    PATH: "${install_dir}/bin"

  post_configuration_script: |
    debug "✓ M2_HOME: ${install_dir}"
    debug "✓ MAVEN_HOME: ${install_dir}"
    debug "✓ Maven version: $(mvn --version | head -n 1)"