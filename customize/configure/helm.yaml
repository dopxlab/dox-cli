# Installation and Configuration
installation:
  download:
    # Template for automatic URL generation
    template: "https://get.helm.sh/helm-{version}-{os}-{arch}.tar.gz"
    # Helm-specific mappings
    mappings:
      os:
        linux: "linux"
        mac: "darwin"
      arch:
        x86_64: "amd64"
        arm64: "arm64"
    
    # Optional: Keep explicit URLs for specific versions (overrides template)
    # 3.17.3:
    #   linux-x86_64: "https://get.helm.sh/helm-v3.17.3-linux-amd64.tar.gz"
    #   mac-arm64: "https://get.helm.sh/helm-v3.17.3-darwin-arm64.tar.gz"

configuration:
  # Fetch latest version from GitHub or use environment variable
  default_version: "${HELM_VERSION:-$(curl -s https://api.github.com/repos/helm/helm/releases/latest | jq -r '.tag_name')}"

  environments:
    PATH: "${install_dir}/"  # Helm extracts to os-arch folder

  post_configuration_script: |
    info "âœ“ Helm version : $(helm version --short)"